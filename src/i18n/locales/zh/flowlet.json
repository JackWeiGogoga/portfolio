{
  "header": {
    "eyebrow": "Flowlet（2023-2025）",
    "title": "内容处理与数据管道的可视化流程编排系统",
    "summary": "面向内容处理、数据清洗、异步回调和多服务协作场景，把复杂流程做成可视化、可执行、可监控的工程系统。",
    "links": {
      "repo": "GitHub 仓库",
      "live": "项目线上地址"
    }
  },
  "why": {
    "title": "为什么做 Flowlet",
    "intro": "在内容处理、数据清洗、异步回调和多服务协作场景里，传统脚本和单体服务经常会遇到一些“卡点”。",
    "painPoints": [
      "流程不可视、难复用：逻辑分散在脚本或服务里，改动成本高。",
      "异步回调难推进：请求发出去很容易，但回调与流程状态一致性很难维护。",
      "跨服务拼接成本高：API、Kafka、LLM、向量化、存储等能力难以形成一条可追踪链路。"
    ],
    "goal": "Flowlet 的目标是把复杂数据流程变成可视化、可执行、可监控、可复用的工程系统。",
    "captionOverview": "使用 Flowlet 构建内容聚类流程示意图"
  },
  "architecture": {
    "title": "系统架构与执行模型",
    "intro": "我们把流程分成三层：可视化设计、结构化定义、后端执行。核心思想是“视图 ≠ 执行”，让流程可序列化、可恢复、可暂停。",
    "layersTitle": "三层抽象：设计、定义、执行",
    "layers": [
      {
        "title": "设计层",
        "description": "前端画布拖拽与节点配置，面向业务与工程的协作。"
      },
      {
        "title": "定义层",
        "description": "将画布结构序列化为流程定义（节点类型 + 配置 + 输入输出映射）。"
      },
      {
        "title": "执行层",
        "description": "后端执行引擎按节点拓扑推进，输出进入统一上下文。"
      }
    ],
    "contextTitle": "统一执行上下文",
    "contextIntro": "执行过程中的数据全部进入统一上下文，节点间的数据传递与引用更规范。",
    "contextFields": [
      {
        "name": "input",
        "description": "流程输入"
      },
      {
        "name": "nodes",
        "description": "历史节点输出"
      },
      {
        "name": "var",
        "description": "流程变量"
      },
      {
        "name": "context",
        "description": "执行元信息（executionId、flowId、currentNodeId）"
      }
    ],
    "stateTitle": "状态推进与恢复",
    "stateIntro": "真实业务里同一条流程往往同时包含同步与异步节点，所以状态推进策略非常关键。",
    "statePoints": [
      "同步节点：执行完成后立即推进后续节点。",
      "异步节点：进入等待回调态，回调成功后再推进。",
      "节点级持久化：支持暂停/恢复，避免回调到达但状态未知。"
    ]
  },
  "async": {
    "title": "异步回调的工程难点",
    "intro": "多数编排系统更擅长同步流程，但真实业务里经常有异步 HTTP 回调、Kafka 事件、长耗时任务通知。",
    "channelsTitle": "双回调通道",
    "channels": [
      "HTTP 回调：传统业务系统或外部服务。",
      "Kafka 回调：高吞吐、事件驱动场景。"
    ],
    "keyPointsTitle": "关键技术点",
    "keyPoints": [
      "执行状态持久化：节点进入等待回调态。",
      "回调关联与幂等：回调必须映射到正确的节点实例。",
      "推进控制：只在回调成功时推进后续节点。"
    ]
  },
  "nodes": {
    "title": "核心节点解析",
    "intro": "下面这些节点是实际工程中最常用的，按“解决的问题 + 能力细节 + 使用方法”来介绍。",
    "labels": {
      "problem": "解决问题",
      "capabilities": "能力细节",
      "usage": "使用方法",
      "notes": "工程难点"
    },
    "items": [
      {
        "title": "API 节点（同步 + 异步）",
        "problem": "对外部服务发起请求，支持同步返回或异步回调。",
        "capabilities": [
          "支持同步请求：直接产出输出并推进。",
          "支持异步模式：流程进入等待态，回调后推进。",
          "输出字段进入上下文，可被下游节点引用。"
        ],
        "usage": [
          "配置 URL / Method / Headers / Body。",
          "选择同步或异步模式。",
          "下游节点通过变量表达式引用输出。"
        ],
        "notes": [
          "同一节点要同时支持同步与异步。",
          "需要输出结构化结果，供后续节点可视化引用。"
        ]
      },
      {
        "title": "Kafka 节点（事件驱动 + 异步）",
        "problem": "在事件驱动系统中发送消息，并等待异步回调。",
        "capabilities": [
          "支持消息发送到指定 Topic。",
          "支持回调消息触发流程推进。",
          "可与 API 节点混合，形成 HTTP + MQ 编排。"
        ],
        "usage": [
          "配置 Topic、Key、Payload。",
          "Payload 可引用上游节点输出字段。",
          "回调到达后，流程自动继续。"
        ],
        "notes": ["回调需要定位到执行实例。", "保证消息幂等与状态一致。"]
      },
      {
        "title": "子流程节点（流程复用）",
        "problem": "复杂流程需要模块化拆分与复用。",
        "capabilities": [
          "调用另一个已定义流程。",
          "支持输入映射与输出回传。",
          "子流程像函数调用一样复用。"
        ],
        "usage": [
          "选择已有流程作为子流程。",
          "配置输入映射。",
          "在父流程中使用子流程输出。"
        ],
        "notes": ["父子流程上下文隔离与数据映射。", "子流程失败时的传播策略。"]
      },
      {
        "title": "代码节点（Python 执行）",
        "problem": "覆盖可视化节点无法表达的复杂逻辑。",
        "capabilities": [
          "通过外部执行服务运行 Python。",
          "标准入口：def run(inputs, context)。",
          "支持入参映射、超时、内存限制、网络限制。"
        ],
        "usage": [
          "编写 run 函数，返回结构化结果。",
          "配置输入映射与资源限制。"
        ],
        "notes": ["执行服务与主引擎解耦。", "需严格控制资源与安全边界。"],
        "codeSample": "def run(inputs, context):\n    user = inputs.get(\"user\", {})\n    return {\"score\": user.get(\"age\", 0) * 2}"
      },
      {
        "title": "LLM 节点（大模型调用）",
        "problem": "在流程中集成摘要、抽取、分类等大模型能力。",
        "capabilities": [
          "支持配置模型参数与提示词模板。",
          "可引用上游节点输出拼接提示词。",
          "输出结构化字段进入上下文。"
        ],
        "usage": [
          "配置模型提供方、提示词模板。",
          "使用变量引用拼装输入。",
          "下游节点直接引用 LLM 输出字段。"
        ],
        "notes": ["控制输出结构化与稳定性。", "保证大模型响应与流程一致性。"]
      },
      {
        "title": "向量存储节点（写入/检索）",
        "problem": "把文本或图片向量写入向量库，或执行向量检索。",
        "capabilities": [
          "支持向量写入与搜索。",
          "可与向量化服务组合形成检索链路。"
        ],
        "usage": ["上游完成向量化。", "选择写入或检索操作。"]
      },
      {
        "title": "数据转换节点（渐进式配置）",
        "problem": "节点间数据结构不一致，需要映射或转换。",
        "capabilities": [
          "可视化字段映射。",
          "高级表达式模式（保留灵活性）。",
          "树形字段选择 + 示例值。",
          "实时预览输出。"
        ],
        "usage": [
          "选择上游节点作为源。",
          "通过字段映射生成新结构。",
          "输出结构供后续节点引用。"
        ],
        "notes": ["把复杂表达式降级为可视化映射。", "兼顾低门槛与高扩展。"]
      },
      {
        "title": "JSON 解析器节点",
        "problem": "上游返回 JSON 字符串，需要解析为结构化字段。",
        "capabilities": ["字符串解析为对象。", "输出可直接进入上下文引用。"]
      },
      {
        "title": "变量赋值节点",
        "problem": "在流程中显式存储或覆盖变量。",
        "capabilities": ["支持变量赋值。", "适合流程中间状态保存。"]
      },
      {
        "title": "Simhash 去重节点",
        "problem": "文本去重或相似内容检测。",
        "capabilities": ["计算 Simhash。", "支持相似性判断。"]
      },
      {
        "title": "关键词匹配节点",
        "problem": "文本关键词命中检测。",
        "capabilities": ["输入文本 + 关键词集合。", "输出命中结果。"]
      },
      {
        "title": "备注节点",
        "problem": "增强流程可读性与说明性。",
        "capabilities": ["用于补充说明或备注信息。"]
      }
    ]
  },
  "example": {
    "title": "典型工程流程示例",
    "intro": "内容处理与向量化管道可以这样组合：",
    "steps": [
      "API 节点拉取内容",
      "数据转换节点清洗与结构化",
      "LLM 节点抽取摘要/标签",
      "向量化节点生成文本向量",
      "向量存储节点写入向量库",
      "Kafka 节点异步通知下游"
    ],
    "note": "这条链路同时覆盖同步与异步、结构化处理、AI 推理与向量检索。"
  },
  "closing": {
    "title": "结语",
    "paragraphs": [
      "Flowlet 的价值不只是“拖拽很酷”，而是把复杂的数据与内容流程，变成工程级可视化系统：可复用、可追踪、可扩展、可监控。",
      "如果你也在做内容处理或 AI 管道系统，欢迎交流。"
    ]
  }
}
